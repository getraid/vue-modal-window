for(var t,e=(function(t){var e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(e){var i=new Uint8Array(16);t.exports=function(){return e(i),i}}else{var n=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),n[e]=t>>>((3&e)<<3)&255;return n}}}(t={exports:{}},t.exports),t.exports),i=[],n=0;n<256;++n)i[n]=(n+256).toString(16).substr(1);var o,a,s=function(t,e){var n=e||0,o=i;return[o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]]].join("")},r=0,d=0;var l=function(t,i,n){var l=i&&n||0,c=i||[],h=(t=t||{}).node||o,u=void 0!==t.clockseq?t.clockseq:a;if(null==h||null==u){var f=e();null==h&&(h=o=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==u&&(u=a=16383&(f[6]<<8|f[7]))}var b=void 0!==t.msecs?t.msecs:(new Date).getTime(),m=void 0!==t.nsecs?t.nsecs:d+1,v=b-r+(m-d)/1e4;if(v<0&&void 0===t.clockseq&&(u=u+1&16383),(v<0||b>r)&&void 0===t.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");r=b,d=m,a=u;var p=(1e4*(268435455&(b+=122192928e5))+m)%4294967296;c[l++]=p>>>24&255,c[l++]=p>>>16&255,c[l++]=p>>>8&255,c[l++]=255&p;var g=b/4294967296*1e4&268435455;c[l++]=g>>>8&255,c[l++]=255&g,c[l++]=g>>>24&15|16,c[l++]=g>>>16&255,c[l++]=u>>>8|128,c[l++]=255&u;for(var w=0;w<6;++w)c[l+w]=h[w];return i||s(c)};var c=function(t,i,n){var o=i&&n||0;"string"==typeof t&&(i="binary"===t?new Array(16):null,t=null);var a=(t=t||{}).random||(t.rng||e)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,i)for(var r=0;r<16;++r)i[o+r]=a[r];return i||s(a)},h=c;h.v1=l,h.v4=c;var u=h,f=[],b={name:"VueModalWindow",props:{id:{type:String,default:function(){return u()}},contentUrl:{type:String},visible:{type:Boolean,default:!0},enableAnotherWindow:{type:Boolean,default:!1},title:{type:String,default:"vue-modal-window"},width:{type:Number,default:300},height:{type:Number,default:200},top:{type:Number,default:20},left:{type:Number,default:20},minWidth:{type:Number,default:60},minHeight:{type:Number,default:20},resizable:{type:Boolean,default:!0},draggable:{type:Boolean,default:!0},recordRect:{type:Boolean,default:!0},recordVisibility:{type:Boolean,default:!0},switchButtons:{type:Boolean,default:!1},restrictByWindow:{type:Boolean,default:!1}},data:function(){var t={left:parseInt(this.left),top:parseInt(this.top),right:parseInt(this.left)+parseInt(this.width),bottom:parseInt(this.top)+parseInt(this.height)};if(this.recordRect||this.recordVisibility){var e=JSON.parse(localStorage.getItem("vue-modal-window"));if(e&&e[this.id]){var i=e[this.id];this.recordRect&&i.rect&&(t=i.rect),this.recordVisibility&&i.hasOwnProperty("visible")&&this.$emit("update:visible",i.visible)}}return{boundingClientRect:t,dragging:!1,draggingDownEvent:null,activeResizableName:null,instanceOrderedList:f,anotherWindow:null,maximized:!1}},computed:{rectWidth:function(){return this.boundingClientRect.right-this.boundingClientRect.left},rectHeight:function(){return this.boundingClientRect.bottom-this.boundingClientRect.top},modalStyle:function(){return this.maximized?{width:window.innerWidth+"px",height:window.innerHeight+"px",top:"0px",left:"0px",zIndex:this.zIndex}:(this.validateBoundingClientRect(this.boundingClientRect),{width:this.rectWidth+"px",height:this.rectHeight+"px",top:this.boundingClientRect.top+"px",left:this.boundingClientRect.left+"px",zIndex:this.zIndex})},zIndex:function(){return 1e3+this.instanceOrderedList.indexOf(this)},active:function(){return this.instanceOrderedList[this.instanceOrderedList.length-1]===this},visibleMain:function(){return this.visible&&!this.anotherWindow}},mounted:function(){this.instanceOrderedList.push(this),document.body.addEventListener("mousemove",this.onMouseMove,!1),document.body.addEventListener("mouseup",this.onMouseUp,!1),document.body.addEventListener("mouseleave",this.onMouseLeave,!1)},beforeDestroy:function(){this.deleleFromInstanceOrderedList(),document.body.removeEventListener("mousemove",this.onMouseMove,!1),document.body.removeEventListener("mouseup",this.onMouseUp,!1),document.body.removeEventListener("mouseleave",this.onMouseLeave,!1)},methods:{onMouseMove:function(t){this.draggingDownEvent&&(this.dragging=!0),this.dragging&&(t.preventDefault(),this.onDraggableMove(t)),this.activeResizableName&&(t.preventDefault(),this.resize(this.activeResizableName,t.clientX,t.clientY))},onMouseUp:function(){if((this.dragging||this.activeResizableName)&&this.recordRect){var t=JSON.parse(localStorage.getItem("vue-modal-window"))||{};t[this.id]||(t[this.id]={}),t[this.id].rect=Object.assign({},this.boundingClientRect),localStorage.setItem("vue-modal-window",JSON.stringify(t))}return this.activeResizableName=null,this.dragging=!1,this.draggingDownEvent=null,!0},onClickModal:function(){this.setForeground()},onClickMaximizeButton:function(){this.enableAnotherWindow?this.openWindow():this.maximize()},onClickMinimizeButton:function(){this.$emit("update:visible",!this.visible)},onDraggableDown:function(){(event.target.classList.contains("title")||event.target.classList.contains("title-text"))&&(this.setForeground(),this.draggable&&(this.draggingDownEvent={offsetX:event.offsetX,offsetY:event.offsetY}))},onMouseLeave:function(){return this.dragging=!1,this.draggingDownEvent=null,this.activeResizableName=null,!1},onDraggableMove:function(t){var e=this.rectWidth,i=this.rectHeight;this.boundingClientRect.left=t.clientX-this.draggingDownEvent.offsetX,this.boundingClientRect.top=t.clientY-this.draggingDownEvent.offsetY,(this.boundingClientRect.left+e<window.innerWidth-10||!this.restrictByWindow)&&(this.boundingClientRect.right=this.boundingClientRect.left+e),(this.boundingClientRect.top+i<window.innerHeight-10||!this.restrictByWindow)&&(this.boundingClientRect.bottom=this.boundingClientRect.top+i)},onResizableDown:function(t){this.resizable&&(this.activeResizableName=t)},resize:function(t,e,i){this.dispatchResizeEvent();var n=t.split("-");-1!==n.indexOf("left")&&(this.boundingClientRect.left=Math.min(e,this.boundingClientRect.right-this.minWidth)),-1!==n.indexOf("right")&&(this.boundingClientRect.right=Math.max(e,this.boundingClientRect.left+this.minWidth)),-1!==n.indexOf("top")&&(this.boundingClientRect.top=Math.min(i,this.boundingClientRect.bottom-this.minHeight)),-1!==n.indexOf("bottom")&&(this.boundingClientRect.bottom=Math.max(i,this.boundingClientRect.top+this.minHeight))},validateBoundingClientRect:function(t){var e=this.rectWidth,i=this.rectHeight;t.top=Math.min(Math.max(t.top,0),window.innerHeight-this.minHeight),t.left=Math.min(Math.max(t.left,this.minWidth-e),window.innerWidth-this.minWidth),t.right=t.left+e,t.bottom=t.top+i},deleleFromInstanceOrderedList:function(){var t=this.instanceOrderedList.indexOf(this);if(-1===t)throw new Error("This instance has not exist in instanceOrderList");return this.instanceOrderedList.splice(t,1)},setForeground:function(){this.deleleFromInstanceOrderedList(),this.instanceOrderedList.push(this)},openWindow:function(){var t=this;if(!this.contentUrl){console.log(this.$refs.content.innerHTML);var e=this.$refs.content.innerHTML,i=document.createElement("a");return i.target="_blank",i.href="data:text/html;charset=utf-8,"+e,i.style.display="none",document.body.appendChild(i),void i.click()}this.anotherWindow=window.open(this.contentUrl,"window","width=500,height=500"),this.anotherWindow.addEventListener("load",function(){t.anotherWindow.addEventListener("unload",function(){t.anotherWindow=null})})},reload:function(){this.contentUrl&&this.$refs.iframe.contentDocument.location.reload(!0)},maximize:function(){this.resizable&&(this.dispatchResizeEvent(),this.maximized=!this.maximized)},dispatchResizeEvent:function(){var t=this;this.$refs.content.children&&0!==this.$refs.content.children.length&&setTimeout(function(){t.$refs.content.children[0].dispatchEvent(new Event("resize"))},0)}},watch:{visible:function(t){if(t?this.setForeground():this.anotherWindow&&(this.anotherWindow.close(),this.anotherWindow=null),this.recordVisibility){var e=JSON.parse(localStorage.getItem("vue-modal-window"));if(e&&e[this.id])e[this.id].visible=t,localStorage.setItem("vue-modal-window",JSON.stringify(e))}}}};function m(t,e,i,n,o,a,s,r,d,l){"boolean"!=typeof s&&(d=r,r=s,s=!1);var c,h="function"==typeof i?i.options:i;if(t&&t.render&&(h.render=t.render,h.staticRenderFns=t.staticRenderFns,h._compiled=!0,o&&(h.functional=!0)),n&&(h._scopeId=n),a?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,d(t)),t&&t._registeredComponents&&t._registeredComponents.add(a)},h._ssrRegister=c):e&&(c=s?function(t){e.call(this,l(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,r(t))}),c)if(h.functional){var u=h.render;h.render=function(t,e){return c.call(e),u(t,e)}}else{var f=h.beforeCreate;h.beforeCreate=f?[].concat(f,c):[c]}return i}var v,p="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function g(t){return function(t,e){return function(t,e){var i=p?e.media||"default":t,n=w[i]||(w[i]={ids:new Set,styles:[]});if(!n.ids.has(t)){n.ids.add(t);var o=e.source;if(e.map&&(o+="\n/*# sourceURL="+e.map.sources[0]+" */",o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e.map))))+" */"),n.element||(n.element=document.createElement("style"),n.element.type="text/css",e.media&&n.element.setAttribute("media",e.media),void 0===v&&(v=document.head||document.getElementsByTagName("head")[0]),v.appendChild(n.element)),"styleSheet"in n.element)n.styles.push(o),n.element.styleSheet.cssText=n.styles.filter(Boolean).join("\n");else{var a=n.ids.size-1,s=document.createTextNode(o),r=n.element.childNodes;r[a]&&n.element.removeChild(r[a]),r.length?n.element.insertBefore(s,r[a]):n.element.appendChild(s)}}}(t,e)}}var w={};var x=m({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.visibleMain,expression:"visibleMain"}],staticClass:"vue-modal-window"},[i("div",{staticClass:"main",class:{active:t.active},style:t.modalStyle,on:{click:t.onClickModal}},[i("div",{staticClass:"title",attrs:{title:t.title},on:{dblclick:t.maximize,mousedown:t.onDraggableDown}},[i("div",{staticClass:"title-text"},[t._v(t._s(t.title))]),t._v(" "),t.switchButtons?t._e():i("div",{staticClass:"head-buttons"},[i("div",{staticClass:"head-button minimize-button",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.onClickMinimizeButton(e)}}},[i("div")]),t._v(" "),t.resizable?i("div",{staticClass:"head-button maximize-button",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.onClickMaximizeButton(e)}}},[i("div")]):t._e()]),t._v(" "),t.switchButtons?i("div",{staticClass:"head-buttons"},[t.resizable?i("div",{staticClass:"head-button maximize-button",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.onClickMaximizeButton(e)}}},[i("div")]):t._e(),t._v(" "),i("div",{staticClass:"head-button minimize-button",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.onClickMinimizeButton(e)}}},[i("div")])]):t._e()]),t._v(" "),i("div",{ref:"content",staticClass:"modal-content"},[t._t("default"),t._v(" "),t.contentUrl?i("iframe",{ref:"iframe",attrs:{src:t.contentUrl}}):t._e()],2),t._v(" "),t.resizable?i("div",{staticClass:"resizable-elements"},t._l(["top-left","top-right","bottom-left","bottom-right","top","left","right","bottom"],function(e){return i("div",{key:e,staticClass:"resizable",class:e,on:{mousedown:function(i){return t.onResizableDown(e)}}})}),0):t._e()]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.dragging||t.activeResizableName,expression:"dragging || activeResizableName"}],staticClass:"cover",class:t.activeResizableName})])},staticRenderFns:[]},function(t){t&&t("data-v-62cbf5d0_0",{source:".main[data-v-62cbf5d0]{position:absolute;background:#fbfdff;border-radius:4px;border:solid #d0d0d0 1px;cursor:default;box-shadow:#0000002b 0 0 3px}.main.active[data-v-62cbf5d0]{box-shadow:rgba(0,0,0,.29) 0 0 13px}.main.active .title[data-v-62cbf5d0]{background:linear-gradient(to bottom,#696969,#4a4a4a)}.main .title[data-v-62cbf5d0]{height:22px;font-size:13px;background:linear-gradient(to bottom,#585858,#383838);border-radius:4px 4px 0 0}.main .title .title-text[data-v-62cbf5d0]{color:#fff;padding-left:4px;padding-top:2px}.main .title .head-buttons[data-v-62cbf5d0]{position:absolute;top:2px;right:12px}.main .title .head-buttons .head-button[data-v-62cbf5d0]{border-radius:9px;width:15px;height:15px;background-color:#ababab;border:solid #3e3e3eb5 1px;display:inline-block}.main .title .head-buttons .head-button[data-v-62cbf5d0]:hover{background-color:#c3c3c3}.main .title .head-buttons .head-button[data-v-62cbf5d0]:active{background-color:#f5f5f5}.main .title .head-buttons .minimize-button div[data-v-62cbf5d0]{width:9px;height:1px;background-color:#4c4c4c;left:3px;position:relative;top:7px}.main .title .head-buttons .maximize-button div[data-v-62cbf5d0]{width:7px;height:7px;border:solid 1px #4c4c4c;left:3px;position:relative;top:3px}.main .modal-content[data-v-62cbf5d0]{width:100%;height:calc(100% - 22px);overflow:auto;position:relative;border-radius:0 0 4px 4px}.main .modal-content iframe[data-v-62cbf5d0]{width:100%;height:calc(100% - 3px);border:none}.main .resizable[data-v-62cbf5d0]{position:absolute}.main .resizable.left[data-v-62cbf5d0],.main .resizable.right[data-v-62cbf5d0]{width:3px;height:calc(100% - 12px);top:8px;cursor:ew-resize}.main .resizable.bottom[data-v-62cbf5d0],.main .resizable.top[data-v-62cbf5d0]{height:3px;width:calc(100% - 12px);left:8px;cursor:ns-resize}.main .resizable.bottom-left[data-v-62cbf5d0],.main .resizable.bottom-right[data-v-62cbf5d0],.main .resizable.top-left[data-v-62cbf5d0],.main .resizable.top-right[data-v-62cbf5d0]{width:8px;height:8px}.main .resizable.bottom-right[data-v-62cbf5d0],.main .resizable.right[data-v-62cbf5d0],.main .resizable.top-right[data-v-62cbf5d0]{right:0}.main .resizable.bottom-left[data-v-62cbf5d0],.main .resizable.left[data-v-62cbf5d0],.main .resizable.top-left[data-v-62cbf5d0]{left:0}.main .resizable.top[data-v-62cbf5d0],.main .resizable.top-left[data-v-62cbf5d0],.main .resizable.top-right[data-v-62cbf5d0]{top:0}.main .resizable.bottom[data-v-62cbf5d0],.main .resizable.bottom-left[data-v-62cbf5d0],.main .resizable.bottom-right[data-v-62cbf5d0]{bottom:0}.cover[data-v-62cbf5d0]{width:100%;height:100%;position:absolute;top:0;left:0;z-index:5000}.left[data-v-62cbf5d0],.right[data-v-62cbf5d0]{cursor:ew-resize}.bottom[data-v-62cbf5d0],.top[data-v-62cbf5d0]{cursor:ns-resize}.top-left[data-v-62cbf5d0]{cursor:nw-resize}.top-right[data-v-62cbf5d0]{cursor:ne-resize}.bottom-left[data-v-62cbf5d0]{cursor:sw-resize}.bottom-right[data-v-62cbf5d0]{cursor:se-resize}",map:void 0,media:void 0})},b,"data-v-62cbf5d0",!1,void 0,!1,g,void 0,void 0);function z(t){z.installed||(z.installed=!0,t.component("VueModalWindow",x))}var y={install:z},C=null;"undefined"!=typeof window?C=window.Vue:"undefined"!=typeof global&&(C=global.Vue),C&&C.use(y),x.install=z;export default x;
